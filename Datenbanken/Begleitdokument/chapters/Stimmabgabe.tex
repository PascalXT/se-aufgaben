\chapter{Stimmabgabe}
Die Stimmabgabe im Wahlinformationssystem läuft wie folgt ab. Der Wähler erscheint im Wahllokal seines Wahlbezirkes. 
Dort legt er seinen Personalausweis vor. Durch die Vorlage des Personalausweises wird verhindert dass eine nicht-autorisierte
Person eine Stimme abgeben kann. Der Wahlhelfer vor Ort gibt die Personalausweisnummer in der vorgesehenen Weboberfläche ein: 

\begin{figure}[htbp]
\centering
\includegraphics[width=0.6\textwidth]{figures/wahlraum-screenshot.png}
\caption{Webschnittstelle zur Eingabe der Personalausweis-Nummer}
\label{fig:wahlraum-screenshot}
\end{figure}

Das System prüft ob die Personalausweisnummer ein stimmberechtigter Wähler ist (Ausweisnummer ist berechtiger Wähler in Wahlkreis und Wahlbezirk). 
Wenn ja, wird geprüft ob dieser nicht bereits seine Stimme abgegeben hat (Flag \emph{gewählt} muss auf \emph{false} gesetzt sein). 
Hat er noch nicht gewählt, generiert das System ein zufälliges, zentral auf dem Server gespeichertes Wählpasswort, das der Wahlhelfer dem 
Wähler beispielsweise auf einem Datenträger übergibt. Durch die Generierung des Wählpassworts wird das Flag \emph{gewählt} auf \emph{true} gesetzt. 
Dadurch wird verhindert dass der gleiche Wähler mehrfach wählen kann. 

\section{Wahlzettel}

Das Wählpasswort berechtigt den Wähler an einem Wahlcomputer (der sich idealerweise im Wahlraum befindet) seine Stimme abzugeben:

\begin{figure}[htbp]
\centering
\includegraphics[width=0.85\textwidth]{figures/wahlzettel-screenshot.png}
\caption{Digitaler Wahlzettel mit Wählpasswort}
\label{fig:wahlzettel-screenshot}
\end{figure}

Sobald der Wähler seine Kreuze gemacht hat, überprüft das
System das eingegebene Wählpasswort. Wenn es korrekt ist, wird die Stimme gezählt und das Wählpasswort erlischt. 
Durch die Indirektion über das anonyme Wählpasswort wird maximaler Datenschutz gewährleistet. 

Es gibt keinerlei Verbindung zwischen Personalausweisnummer und Wählpasswort. Genauso wenig wie zwischen Wählpasswort
und abgegebenen Stimmen. Das Wählpasswort ist allerdings mit seinem Wahlkreis und Wahlbezirk verbunden. Dadurch wird der
Fall verhindert, dass der Wähler sein erhaltenes Wählpasswort in einem anderen Wahllokal abgeben kann und so die 
Statistik verfälscht.

Alle Übertragungen vom Wahllokal zum Server müssen gesichert sein. Da sichere Verbindungen nicht Thema dieses Projektes sind, 
wird in der Implementierung davon ausgangen, dass die Sicherung der Verbindung außerhalb erfolgt.

\section{Auswertung}
Durch einen bestimmten Befehl im Webinterface kann die Auszählung der Stimmen auf Wahlkreisebene angestoßen werden. Es wird davon ausgegangen, dass der Befehl nur dem Organisator bekannt ist und nur von physisch geschützten Orten aus gegeben werden kann. In unserer Implementierung wird die Auszählung durch \url{http://localhost:8080/WahlWebsite/ShowResult?query=refreshvotes} ausgelöst. Der Begriff refreshvotes steht dabei als Beispiel für einen möglichen geheimen Befehl. Tatsächlich sollte dieser Befehl einem langen Passwort entsprechen. Die Auszählung darf erst nach Schließung des letzten Wahllokales ausgelöst werden. Die Sicherung der Auswertungsfunktion ist nötig, um zu verhindern, dass ständig hochaktuelle Ergebnisse verfügbar sind. Hochaktuelle Ergebnisse würden es in Einzelfällen möglich machen, auf die Stimmabgabe von Einzelpersonen zu schließen, indem das Ergebnis vor der Stimmabgabe mit dem Ergebnis nach der Stimmabgabe verglichen wird.